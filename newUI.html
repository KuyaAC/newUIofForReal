<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="newUI.css" />
        <link href="https://db.onlinewebfonts.com/c/3d73cd0279f4c3db9b4f7db0305164f6?family=RansomNote" rel="stylesheet">
        <link href="https://fonts.cdnfonts.com/css/death-note-font" rel="stylesheet">
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <title>For Real?</title>
    </head>
    <div>
        <div class="background-container">
            <div class="inputContainer">
                <div class="container" id="animatedContainer">
                    <div class="dot"></div>
                    <div class="light-beam"></div>
                    <div class="upload-box">
                        <div class="upload-section">
                            <div class="content">
                                <div class="box">
                                    <img
                                        src="upload.png"
                                        id="upload-button"
                                        class="button-image"
                                        alt="Upload Button"
                                        onclick="document.getElementById('file-input').click()"
                                    />

                                    <!-- Hidden file input element -->
                                    <input
                                        type="file"
                                        id="file-input"
                                        accept="audio/*"
                                        onchange="handleFileUpload(this.files)"
                                        style="display: none"
                                    />

                                    <!-- Display area for the uploaded file name -->
                                    <div id="file-info" style="display: none">
                                        <p id="file-name"></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Animation loading -->
                        <div id="loading" class="loading" style="display: none">
                            <div class="loader">
                                <div class="bar1"></div>
                                <div class="bar2"></div>
                                <div class="bar3"></div>
                                <div class="bar4"></div>
                                <div class="bar5"></div>
                                <div class="bar6"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="containerP" id="animatedContainerP" style="display: none;">
                    <div class="dot1"></div>
                    <div class="light-beam"></div>
                    <div class="predict-box">
                        <div class="predict-section">
                            <div class="contentP">
                                <div class="box">
                                </div>
                                <img class="imageBasedOnModel" src="propose.png">
                                <p id="prediction-percentage">
                                    <span>98.30</span>
                                </p>
                                <p class="prediction-text">
                                    There is a 98.30 chance that your audio is deepfake</span>
                                </p>
                                <img
                                    src="reupload.png"
                                    id="reupload-button"
                                    class="reuploadBtn"
                                    alt="Reupload Button"
                                    onclick="handleReupload()"
                                />
                            </div>
                        </div>
                    </div>
                </div>
                <div class="containerI" id="animatedContainerI" style="display: none;">
                    <div class="dot1"></div>
                    <div class="light-beam"></div>
                    <div class="info-box">
                        <div class="info-section">
                            <div class="contentI">
                                <div class="box">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="viewInfo"><a class="arrow arrow-right" title="Model Information"></a>
                </div>
                <div id="info-button-container">
                        <button id="info-button">i</button>
                        <div id="switch-model-container">
                            <span>Switch Models</span>
                            <label class="switch">
                                <input type="checkbox" id="model-switch">
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
            </div>
        </div>
    </body>
     <script>
     document.addEventListener("DOMContentLoaded", () => {
                 const container = document.getElementById("animatedContainer");
                 const containerP = document.getElementById("animatedContainerP");
                 const containerI = document.getElementById("animatedContainerI");
                 const fileInput = document.getElementById("file-input");
                 const fileInfo = document.getElementById("file-info");
                 const fileNameDisplay = document.getElementById("file-name");
                 const viewInfoButton = document.querySelector(".viewInfo");
                 const arrow = viewInfoButton.querySelector(".arrow");

                 let currentContainer = container;

       // Handle file upload
       window.handleFileUpload = (files) => {
         if (files.length > 0) {
           const fileName = files[0].name;
           fileNameDisplay.textContent = fileName;
           fileInfo.style.display = "block";

           container.classList.add("pull-up");

           container.addEventListener("animationend", () => {
             container.style.display = "none";
             setTimeout(() => {
               containerP.style.display = "block";
               containerP.classList.add("show");
               currentContainer = containerP;
             }, 100);
           }, { once: true });
         }
       };

       // Add event listener to the file input
       fileInput.addEventListener("change", () => {
         handleFileUpload(fileInput.files);
       });

       // Add this new function to handle reupload
        window.handleReupload = () => {
            containerP.style.display = "none";
            containerP.classList.remove("show");
            container.style.display = "block";
            container.classList.remove("pull-up");
            currentContainer = container;

            // Reset file input and info
            fileInput.value = "";
            fileInfo.style.display = "none";
            fileNameDisplay.textContent = "";
        };

       // Handle view info button click
       viewInfoButton.addEventListener("click", () => {
         if (arrow.classList.contains("arrow-right")) {
           // Hide current container and show containerI
           currentContainer.style.display = "none";
           containerI.style.display = "block";
           containerI.classList.add("show");
           arrow.classList.remove("arrow-right");
           arrow.classList.add("arrow-left");
           arrow.setAttribute("title", "Back to Upload/Predict");
         } else {
           // Hide containerI and show previous container
           containerI.style.display = "none";
           containerI.classList.remove("show");
           currentContainer.style.display = "block";
           arrow.classList.remove("arrow-left");
           arrow.classList.add("arrow-right");
           arrow.setAttribute("title", "Model Information");
         }
       });
     });

     // SWITCH MODEL
     const infoButton = document.getElementById('info-button');
             const switchModelContainer = document.getElementById('switch-model-container');
             const modelSwitch = document.getElementById('model-switch');

             infoButton.addEventListener('click', () => {
                 switchModelContainer.classList.toggle('visible');
             });

             modelSwitch.addEventListener('change', () => {
                 console.log('Model switched:', modelSwitch.checked);
             });

        </script>
    </body>
</html>
